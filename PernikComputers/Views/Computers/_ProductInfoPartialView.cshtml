@model PernikComputers.Models.ComputerCreateViewModel

<div>
    <div class="d-inline-block w-130">
        <label asp-for="Barcode" class="font-weight-bold"></label>
    </div>
    <div class="d-inline-block w-200">
        <input asp-for="Barcode" class="form-control" />
    </div>
    <p><span asp-validation-for="Barcode" class="text-danger"></span></p>
</div>
<div>
    <div class="d-inline-block w-130">
        <label asp-for="Manufacturer" class="font-weight-bold"></label>
    </div>
    <div class="d-inline-block w-200">
        <input asp-for="Manufacturer" class="form-control" />
    </div>
    <p><span asp-validation-for="Manufacturer" class="text-danger"></span></p>
</div>
<div>
    <div class="d-inline-block w-130">
        <label asp-for="Model" class="font-weight-bold"></label>
    </div>
    <div class="d-inline-block w-200">
        <input asp-for="Model" class="form-control" />
    </div>
    <p><span asp-validation-for="Model" class="text-danger"></span></p>
</div>
@*<div>
    <div class="d-inline-block w-130">
        <label asp-for="Price" class="font-weight-bold"></label>
    </div>
    <div class="d-inline-block w-200">
        <input asp-for="Price" class="form-control" />
    </div>
    <p><span asp-validation-for="Price" class="text-danger"></span></p>
</div>*@
<div>
    <div class="d-inline-block w-130">
        <label asp-for="Warranty" class="font-weight-bold"></label>
    </div>
    <div class="d-inline-block w-200">
        <input asp-for="Warranty" class="form-control" />
    </div>
    <p><span asp-validation-for="Warranty" class="text-danger"></span></p>
</div>
<div>
    <div class="d-inline-block w-130">
        <label asp-for="ProcessorId" class="font-weight-bold"></label>
    </div>
    <div class="d-inline-block w-200">
        <select asp-for="ProcessorId" class="form-control" asp-items="ViewBag.ProcessorId" onclick="SelectMotherboard()"></select>
    </div>
    <p><span asp-validation-for="ProcessorId" class="text-danger"></span></p>
</div>
<div>
    <div class="d-inline-block w-130">
        <label asp-for="MotherboardId" class="font-weight-bold"></label>
    </div>
    <div class="d-inline-block w-200">
        <select asp-for="MotherboardId" class="form-control" onclick="SelectRam()"></select>
    </div>
    <p><span asp-validation-for="MotherboardId" class="text-danger"></span></p>
</div>
<div>
    <div class="d-inline-block w-130">
        <label asp-for="RamId" class="font-weight-bold"></label>
    </div>
    <div class="d-inline-block w-200">
        <select asp-for="RamId" class="form-control"></select>
    </div>
    <p><span asp-validation-for="RamId" class="text-danger"></span></p>
</div>
<div>
    <div class="d-inline-block w-130 align-middle">
        <label asp-for="VideoCardId" class="font-weight-bold"></label>
    </div>
    <div class="d-inline-block w-200 align-middle">
        <select asp-for="VideoCardId" class="form-control" asp-items="ViewBag.VideoCardId"></select>
    </div>
    <p><span asp-validation-for="VideoCardId" class="text-danger"></span></p>
</div>
<div>
    <div class="d-inline-block w-130">
        <label asp-for="PowerSupplyId" class="font-weight-bold"></label>
    </div>
    <div class="d-inline-block w-200">
        <select asp-for="PowerSupplyId" class="form-control" asp-items="ViewBag.PowerSupplyId"></select>
    </div>
    <p><span asp-validation-for="PowerSupplyId" class="text-danger"></span></p>
</div>
<div>
    <div class="d-inline-block w-130">
        <label asp-for="MemoryId" class="font-weight-bold"></label>
    </div>
    <div class="d-inline-block w-200">
        <select asp-for="MemoryId" class="form-control" asp-items="ViewBag.MemoryId"></select>
    </div>
    <p><span asp-validation-for="MemoryId" class="text-danger"></span></p>
</div>
<div>
    <div class="d-inline-block w-130">
        <label asp-for="ComputerCaseId" class="font-weight-bold"></label>
    </div>
    <div class="d-inline-block w-200">
        <select asp-for="ComputerCaseId" class="form-control" asp-items="ViewBag.ComputerCaseId"></select>
    </div>
    <p><span asp-validation-for="ComputerCaseId" class="text-danger"></span></p>
</div>
<div>
    <div class="d-inline-block w-130">
        <label asp-for="Quantity" class="font-weight-bold"></label>
    </div>
    <div class="d-inline-block w-200">
        <input asp-for="Quantity" class="form-control" />
    </div>
    <p><span asp-validation-for="Quantity" class="text-danger"></span></p>
</div>
@*<div>
    <div class="d-inline-block w-130">
        <label asp-for="Image" class="font-weight-bold"></label>
    </div>
    <div class="d-inline-block w-200">
        <input asp-for="Image" class="form-control" />
    </div>
    <p><span asp-validation-for="Image" class="text-danger"></span></p>
</div>*@

<script>
    let processor = document.getElementById('ProcessorId')
    let motherboard = document.getElementById('MotherboardId')
    let ram = document.getElementById('RamId')
    let videoCard = document.getElementById('VideoCardId')
    let powerSupply = document.getElementById('PowerSupplyId')
    let memory = document.getElementById('MemoryId')
    let computerCase = document.getElementById('ComputerCaseId')

    motherboard.disabled = true
    ram.disabled = true

    let processorObj = null
    let motherboardObj = null


    function SelectMotherboard() {
        motherboard.length = 0
        let selectedProcessor = processor.options[processor.selectedIndex].value
        let allProcessors = @Html.Raw(Json.Serialize(@ViewBag.Processors));
        console.log(processor.textContent)

        if (selectedProcessor == 0) {
            location.reload()
        }

        for (var i = 0; i < allProcessors.length; i++) {
            if (selectedProcessor == allProcessors[i].id) {
                processorObj = allProcessors[i]
                break
            }
        }

        let allMotherboards = @Html.Raw(Json.Serialize(@ViewBag.Motherboards));
        for (var i = 0; i < allMotherboards.length; i++) {
            if (allMotherboards[i].socket == processorObj.socket) {
                let newOption = new Option(allMotherboards[i].model, allMotherboards[i].id)
                motherboard.add(newOption, undefined);
            }
        }

        motherboard.disabled = false
    }

    function SelectRam() {
        ram.length = 0

        let allMotherboars = @Html.Raw(Json.Serialize(@ViewBag.Motherboards));
        let selectedMotherboard = motherboard.options[motherboard.selectedIndex].value

        for (var i = 0; i < allMotherboars.length; i++) {
            if (selectedMotherboard == allMotherboars[i].id) {
                motherboardObj = allMotherboars[i]
                break
            }
        }

        let allRams = @Html.Raw(Json.Serialize(@ViewBag.Rams));

        for (var i = 0; i < allRams.length; i++) {
            if (allRams[i].typeRam == motherboardObj.typeRam) {
                let newOption1 = new Option(allRams[i].model, allRams[i].id)
                ram.add(newOption1, undefined);
            }
        }

        ram.disabled = false
    }


    SelectMotherboard()
    SelectRam()
    console.log('Hey')
</script>